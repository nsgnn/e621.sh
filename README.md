# e621.sh

Browse e621 from the comfort of your terminal over SSH.

`e621.sh` is a TUI (Text-based User Interface) application that provides a simple and efficient way to browse, search, and view posts from e621.net without needing a web browser. It leverages the power of SSH to deliver a rich, interactive experience directly in your terminal.

*(Screenshot placeholder: A real screenshot of the application running would be ideal here)*

## Features

* **SSH-Based Interface:** Access from anywhere with an SSH client.

* **Image Previews:** View image previews directly in compatible terminals using the Kitty Graphics Protocol.

* **Search & Filtering:** Search for posts using e621's tag syntax.

* **Post Navigation:** Paginate through search results and browse individual posts.

* **View Post Details:** See post ID, artist(s), score, and a full tag list.

* **Clipboard Integration:** Copy post URLs directly to your system clipboard.

## Requirements

### For Users

* An SSH client.

* **[Kitty Terminal](https://sw.kovidgoyal.net/kitty/)** is required for image previews to work. Other terminals may not render images correctly.

### For Hosting

* Go (version 1.18 or newer).

* The `kitty` binary must be in the server's `PATH` for image rendering.

* (Optional) `ffmpeg` installed in the server's `PATH` to support more file formats with kitty image rendering.

## Getting Started

### 1. Clone the Repository

```
git clone <your-repo-url>
cd <your-repo-directory>
```

### 2. Install Dependencies

The project uses several libraries from the Charm ecosystem. You can fetch them using Go modules:

```
go mod tidy
```

### 3. Build the Executable

```
go build -o e621sh .
```

### 4. Run the Server

The server will generate an SSH key on its first run and save it to `.ssh/term_info_ed25519`.

```
./e621sh
```

By default, the server runs on port `2222`. You can change the host and port by editing the constants in `main.go`.

### 5. Connect to the Server

From your local machine (with the Kitty terminal):

```
ssh your_user@your_server_ip -p 2222
# Easy alternative for local testing:
# ssh -p 2222 localhost
```

## How to Use

The application is controlled via keyboard shortcuts.

### Main Menu

* **←/→:** Navigate between `Latest` and `Popular` buttons.

* **Tab:** Switch focus between the preset buttons and the search input box.

* **Enter:** Select a preset or perform a search.

* **Esc / Ctrl+C:** Quit the application.

### Post Browser

| Key(s) | Action |
| --- | --- |
| `↑` / `k` | Move selection up in the post list. |
| `↓` / `j` | Move selection down in the post list. |
| `→` / `l` | Go to the next page of results. |
| `←` / `h` | Go to the previous page of results. |
| `/` | Focus the search/filter bar at the bottom. |
| `r` | Refresh the current search results. |
| `e` | Toggle between `sample` and `full` resolution images. |
| `c` | Copy the selected post's direct file URL to the clipboard. |
| `t` | Toggle the tag list overlay for the selected post. |
| `q` / `esc` | Return to the main menu. |

## How It Works

This application is built in Go and relies on a few key libraries:

* [**Wish**](https://github.com/charmbracelet/wish): For creating the SSH server.

* [**Bubble Tea**](https://github.com/charmbracelet/bubbletea): For building the terminal user interface.

* [**Lip Gloss**](https://github.com/charmbracelet/lipgloss): For styling the UI components.

It fetches post data from the public `e621.net/posts.json` API endpoint. For image rendering, it downloads the image to a temporary file on the server and then uses the `kitty icat` command to transmit it to the client's terminal over the SSH session.

## License

This project is licensed under the [GNU General Public License v3.0](https://www.gnu.org/licenses/gpl-3.0.en.html).

*This README was generated by Gemini*

